#!/usr/bin/env python3
import json
import re

# より多くの漢字の修正パターンを定義
kanji_fixes = {
    # 既に修正した漢字も含めて再確認
    "街": ("商店[街|がい]で買い物しました。", "[街|まち]角で待ち合わせました。"),
    "各": ("[各|かく]地から人が集まりました。", "[各|おのおの]が責任を持ちます。"),
    "覚": ("[覚|おぼ]えるのが早いです。", "感[覚|かく]が鋭くなりました。"),
    "確": ("[確|たし]かな情報です。", "[確|かく]認作業を行いました。"),
    "額": ("[額|ひたい]に汗をかきました。", "金[額|がく]を計算しました。"),
    "刊": ("月[刊|かん]誌を購読しています。", "新[刊|かん]本が発売されました。"),
    "幹": ("木の[幹|みき]が太いです。", "[幹|かん]事会に出席しました。"),
    "慣": ("[慣|な]れるまで時間がかかります。", "習[慣|かん]を身につけました。"),
    "願": ("[願|ねが]いが叶いました。", "志[願|がん]者が増えました。"),
    "危": ("[危|あぶ]ない場所です。", "[危|き]険を回避しました。"),
    "机": ("[机|つくえ]の上を整理しました。", "学習[机|き]を買いました。"),
    "揮": ("指[揮|き]者が登場しました。", "才能を発[揮|き]しました。"),
    "貴": ("[貴|たっと]い経験をしました。", "[貴|き]重品を保管しました。"),
    "疑": ("[疑|うたが]いを持ちました。", "[疑|ぎ]問が解決しました。"),
    "吸": ("[吸|す]い込む力が強いです。", "呼[吸|きゅう]を整えました。"),
    "泣": ("[泣|な]いてしまいました。", "号[泣|きゅう]する声が聞こえました。"),
    "級": ("上[級|きゅう]クラスに進みました。", "階[級|きゅう]が上がりました。"),
    "供": ("[供|とも]に歩きました。", "提[供|きょう]されたサービスです。"),
    "胸": ("[胸|むね]が痛みました。", "[胸|きょう]部レントゲンを撮りました。"),
    "況": ("状[況|きょう]を確認しました。", "好[況|きょう]が続いています。"),
    "狭": ("[狭|せま]い部屋です。", "[狭|きょう]い範囲で調査しました。"),
    "恐": ("[恐|おそ]ろしい体験でした。", "[恐|きょう]怖を感じました。"),
    "驚": ("[驚|おどろ]きました。", "[驚|きょう]異的な成長です。"),
    "筋": ("[筋|すじ]道を立てて話しました。", "[筋|きん]肉を鍛えました。"),
    "勤": ("[勤|つと]めを果たしました。", "[勤|きん]務時間を確認しました。"),
    "菌": ("細[菌|きん]を調べました。", "殺[菌|きん]処理をしました。"),
    "偶": ("[偶|ぐう]然出会いました。", "[偶|たま]に訪れます。"),
    "隅": ("[隅|すみ]に置きました。", "[隅|ぐう]々まで調べました。"),
    "屈": ("[屈|くっ]しない精神です。", "理[屈|くつ]を並べました。"),
    "掘": ("[掘|ほ]り起こしました。", "発[掘|くつ]作業を行いました。"),
    "繰": ("[繰|く]り返し練習しました。", "[繰|く]り上げ当選しました。"),
    "群": ("[群|むれ]を作って行動します。", "[群|ぐん]衆が集まりました。"),
    "刑": ("[刑|けい]罰を受けました。", "死[刑|けい]判決が出ました。"),
    "形": ("[形|かたち]を整えました。", "[形|けい]式を重視します。"),
    "系": ("[系|けい]統立てて説明しました。", "文[系|けい]の学部です。"),
    "経": ("[経|へ]て成長しました。", "[経|けい]験を積みました。"),
    "恵": ("[恵|めぐ]みの雨が降りました。", "知[恵|え]を借りました。"),
    "警": ("[警|けい]察に通報しました。", "[警|けい]備を強化しました。"),
    "芸": ("[芸|げい]術作品を鑑賞しました。", "演[芸|げい]を楽しみました。"),
    "欠": ("[欠|か]けている部分があります。", "[欠|けっ]席届を出しました。"),
    "穴": ("[穴|あな]を掘りました。", "[穴|けつ]場を埋めました。"),
    "血": ("[血|ち]が出ました。", "[血|けつ]液検査をしました。"),
    "決": ("[決|き]めました。", "[決|けっ]定事項です。"),
    "月": ("[月|つき]が美しいです。", "来[月|げつ]の予定です。"),
    "件": ("[件|けん]数を数えました。", "事[件|けん]が発生しました。"),
    "券": ("入場[券|けん]を買いました。", "商品[券|けん]をもらいました。"),
    "肩": ("[肩|かた]が凝りました。", "[肩|けん]書きが立派です。"),
    "建": ("[建|た]てました。", "[建|けん]築物です。"),
    "憲": ("[憲|けん]法を学びました。", "改[憲|けん]議論が進みました。"),
    "賢": ("[賢|かしこ]い子供です。", "[賢|けん]明な判断でした。"),
    "険": ("[険|けわ]しい山道です。", "危[険|けん]を避けました。"),
    "検": ("[検|けん]査を受けました。", "点[検|けん]作業を行いました。"),
    "限": ("[限|かぎ]りがあります。", "制[限|げん]を設けました。"),
    "現": ("[現|あらわ]れました。", "[現|げん]実を見つめます。"),
    "原": ("[原|はら]っぱで遊びました。", "[原|げん]因を調べました。"),
    "厳": ("[厳|きび]しい指導です。", "[厳|げん]格な審査でした。"),
    "源": ("[源|みなもと]を探しました。", "水[源|げん]地を訪れました。"),
    "減": ("[減|へ]りました。", "[減|げん]少傾向にあります。"),
    "古": ("[古|ふる]い建物です。", "[古|こ]典を読みました。"),
    "呼": ("[呼|よ]びました。", "[呼|こ]吸を整えました。"),
    "固": ("[固|かた]まりました。", "[固|こ]定しました。"),
    "己": ("[己|おのれ]を知ることが大切です。", "自[己|こ]紹介をしました。"),
    "個": ("[個|こ]別に対応します。", "[個|こ]人情報を守ります。"),
    "故": ("[故|ゆえ]に大切です。", "[故|こ]障が発生しました。"),
    "湖": ("[湖|みずうみ]で泳ぎました。", "[湖|こ]畔を散歩しました。"),
    "枯": ("[枯|か]れてしまいました。", "[枯|こ]渇した土地です。"),
    "雇": ("[雇|やと]いました。", "[雇|こ]用契約を結びました。"),
    "誇": ("[誇|ほこ]りに思います。", "[誇|こ]張して話しました。"),
    "鼓": ("[鼓|つづみ]を打ちました。", "太[鼓|こ]の音が響きました。"),
    "護": ("[護|まも]りました。", "保[護|ご]されています。"),
    "効": ("[効|き]きました。", "[効|こう]果が現れました。"),
    "口": ("[口|くち]を開けました。", "入[口|ぐち]で待ちました。"),
    "構": ("[構|かま]えました。", "[構|こう]造を調べました。"),
    "講": ("[講|こう]義を受けました。", "[講|こう]演会に参加しました。"),
    "荒": ("[荒|あら]い波です。", "[荒|こう]廃した土地です。"),
    "航": ("[航|こう]海しました。", "[航|こう]空機に乗りました。"),
    "郊": ("[郊|こう]外に住んでいます。", "近[郊|こう]を散策しました。"),
    "巧": ("[巧|たく]みな技です。", "[巧|こう]妙な仕掛けです。"),
    "康": ("[康|こう]復しました。", "健[康|こう]を維持します。"),
    "控": ("[控|ひか]えました。", "[控|こう]室で待機しました。"),
    "候": ("[候|こう]補者が決まりました。", "天[候|こう]に恵まれました。"),
    "耕": ("[耕|たがや]しました。", "[耕|こう]作地を広げました。"),
    "鉱": ("[鉱|こう]山で働きました。", "[鉱|こう]石を採掘しました。"),
    "綱": ("[綱|つな]を引きました。", "[綱|こう]領を定めました。"),
    "込": ("[込|こ]みました。", "申し[込|こ]みました。"),
    "頃": ("[頃|ころ]合いを見計らいました。", "この[頃|ごろ]忙しいです。"),
    "困": ("[困|こま]りました。", "[困|こん]難に直面しました。"),
    "婚": ("[婚|こん]約しました。", "結[婚|こん]式を挙げました。"),
    "恨": ("[恨|うら]みました。", "[恨|こん]みを抱きました。"),
    "懇": ("[懇|こん]願しました。", "[懇|ねんご]ろに頼みました。"),
    "混": ("[混|ま]ぜました。", "[混|こん]雑しています。"),
    "紺": ("[紺|こん]色の服です。", "[紺|こん]青の空でした。"),
    "魂": ("[魂|たましい]を込めました。", "[魂|こん]を入れて作りました。"),
    "佐": ("[佐|さ]官に昇進しました。", "補[佐|さ]役を務めました。"),
    "唆": ("教[唆|さ]されました。", "[唆|そそのか]されました。"),
    "詐": ("[詐|さ]欺に遭いました。", "[詐|さ]称していました。"),
    "鎖": ("[鎖|くさり]でつなぎました。", "連[鎖|さ]反応が起きました。"),
    "債": ("[債|さい]券を購入しました。", "負[債|さい]を返済しました。"),
    "催": ("[催|もよお]しました。", "開[催|さい]されました。"),
    "宰": ("[宰|さい]相が決まりました。", "主[宰|さい]者として活動しました。"),
    "彩": ("[彩|いろど]りました。", "[彩|さい]色豊かです。"),
    "歳": ("[歳|さい]を取りました。", "何[歳|さい]ですか。"),
    "載": ("[載|の]せました。", "記[載|さい]されています。"),
    "剤": ("薬[剤|ざい]を使いました。", "洗[剤|ざい]で洗いました。"),
    "柔": ("[柔|やわ]らかい布団です。", "[柔|じゅう]道を習っています。"),
    "渋": ("[渋|しぶ]い味がします。", "[渋|じゅう]滞に巻き込まれました。"),
    "獣": ("野[獣|じゅう]が現れました。", "[獣|けもの]の足跡を見つけました。"),
    "縦": ("[縦|たて]に線を引きました。", "[縦|じゅう]横無尽に動きました。"),
    "重": ("[重|おも]い荷物を運びました。", "[重|じゅう]要な会議です。"),
    "銃": ("[銃|じゅう]を構えました。", "猟[銃|じゅう]の許可を取りました。"),
    "叔": ("[叔|しゅく]父に会いました。", "[叔|しゅく]母が来ました。"),
    "宿": ("[宿|やど]に泊まりました。", "[宿|しゅく]題を忘れました。"),
    "淑": ("[淑|しゅく]女になりなさい。", "貞[淑|しゅく]な人です。"),
    "祝": ("[祝|いわ]いの言葉を述べました。", "[祝|しゅく]日は休みです。"),
    "縮": ("[縮|ちぢ]んでしまいました。", "[縮|しゅく]小コピーを作りました。"),
    "粛": ("[粛|しゅく]清されました。", "厳[粛|しゅく]な雰囲気でした。"),
    "塾": ("[塾|じゅく]に通っています。", "学習[塾|じゅく]で勉強しました。"),
    "俊": ("[俊|しゅん]才な人です。", "[俊|しゅん]敏な動きです。"),
    "瞬": ("[瞬|まばた]きしました。", "[瞬|しゅん]間的に判断しました。"),
    "准": ("[准|じゅん]教授になりました。", "[准|じゅん]じて扱います。"),
    "殉": ("[殉|じゅん]職しました。", "[殉|じゅん]教者となりました。"),
    "循": ("[循|じゅん]環しています。", "[循|じゅん]環器科に行きました。"),
    "順": ("[順|じゅん]番を守りました。", "[順|したが]って進みました。"),
    "巡": ("[巡|めぐ]りました。", "[巡|じゅん]回しています。"),
    "盾": ("[盾|たて]を持ちました。", "矛[盾|じゅん]を感じました。"),
    "准": ("[准|じゅん]じて扱います。", "[准|じゅん]教授になりました。"),
    "旬": ("[旬|しゅん]の野菜です。", "上[旬|じゅん]に会議があります。"),
    "徐": ("[徐|じょ]々に進みました。", "[徐|おもむろ]に話し始めました。"),
    "叙": ("[叙|じょ]述しました。", "[叙|じょ]勲されました。"),
    "序": ("[序|じょ]文を書きました。", "[序|ついで]に言いますと。"),
    "恕": ("[恕|じょ]してください。", "寛[恕|じょ]の心を持ちました。"),
    "如": ("[如|ごと]く行動しました。", "[如|じょ]何にして達成するか。"),
    "徐": ("[徐|じょ]々に変化しました。", "[徐|おもむろ]に立ち上がりました。")
}

# ファイルを読み込む
with open('src/data/questions/questions-junior.json', 'r', encoding='utf-8') as f:
    content = f.read()

# 修正カウンター
fixed_count = 0

# 各漢字のパターンを修正
for kanji, (pattern1, pattern2) in kanji_fixes.items():
    # "について学びました"パターンの修正
    old_pattern = f'[{kanji}|よみ]について学びました。'
    if old_pattern in content:
        content = content.replace(old_pattern, pattern1)
        fixed_count += content.count(pattern1)
    
    # "を使って文を作ります"パターンの修正
    old_pattern = f'[{kanji}|よみ]を使って文を作ります。'
    if old_pattern in content:
        content = content.replace(old_pattern, pattern2)
        fixed_count += content.count(pattern2)

print(f"修正予定の項目数: {fixed_count}")

# 残りのエラーパターンを確認
remaining_errors = re.findall(r'\[(.+?)\|よみ\]', content)
if remaining_errors:
    print(f"\n未修正の漢字: {set(remaining_errors)}")

# ファイルに書き戻す
with open('src/data/questions/questions-junior.json', 'w', encoding='utf-8') as f:
    f.write(content)